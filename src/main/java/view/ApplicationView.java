/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import dao.FuncionarioDao;
import entities.Funcionario;
import java.time.LocalDate;
import java.time.ZoneId;
import java.util.Date;
import java.util.Optional;
import org.hibernate.SessionFactory;
import utils.HibernateUtil;

/**
 *
 * @author evely
 */
public class ApplicationView extends javax.swing.JFrame {

    /**
     * Creates new form ApplicationView
     */
    public ApplicationView() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        background = new javax.swing.JPanel();
        cadastros = new javax.swing.JPanel();
        tfdusuario = new javax.swing.JTextField();
        tfdnome = new javax.swing.JTextField();
        tfdsenha = new javax.swing.JPasswordField();
        tfdcpf = new javax.swing.JTextField();
        tfdstatus = new javax.swing.JTextField();
        tfdemail = new javax.swing.JTextField();
        tfdestado = new javax.swing.JTextField();
        tfdcidade = new javax.swing.JTextField();
        tfdtelefone = new javax.swing.JTextField();
        tfdatividade = new javax.swing.JTextField();
        tfddata = new com.toedter.calendar.JDateChooser();
        tfdsexo = new javax.swing.JTextField();
        btncadastrar = new javax.swing.JButton();
        backgroundcadastro = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        background.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        cadastros.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tfdusuario.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdusuario.setBorder(null);
        cadastros.add(tfdusuario, new org.netbeans.lib.awtextra.AbsoluteConstraints(790, 280, 270, 30));

        tfdnome.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdnome.setBorder(null);
        cadastros.add(tfdnome, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 140, 270, 30));

        tfdsenha.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        tfdsenha.setToolTipText("");
        tfdsenha.setBorder(null);
        cadastros.add(tfdsenha, new org.netbeans.lib.awtextra.AbsoluteConstraints(790, 360, 260, 30));

        tfdcpf.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdcpf.setBorder(null);
        cadastros.add(tfdcpf, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 280, 280, 30));

        tfdstatus.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdstatus.setBorder(null);
        cadastros.add(tfdstatus, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 210, 280, 30));

        tfdemail.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdemail.setBorder(null);
        cadastros.add(tfdemail, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 130, 280, 30));

        tfdestado.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdestado.setBorder(null);
        cadastros.add(tfdestado, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 520, 280, 30));

        tfdcidade.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdcidade.setBorder(null);
        cadastros.add(tfdcidade, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 530, 280, 30));

        tfdtelefone.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdtelefone.setBorder(null);
        cadastros.add(tfdtelefone, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 360, 280, 30));

        tfdatividade.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdatividade.setBorder(null);
        cadastros.add(tfdatividade, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 450, 280, 30));
        cadastros.add(tfddata, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 450, 280, 40));

        tfdsexo.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        tfdsexo.setToolTipText("");
        cadastros.add(tfdsexo, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 200, 290, 40));

        btncadastrar.setFont(new java.awt.Font("Poppins", 0, 14)); // NOI18N
        btncadastrar.setText("Cadastrar");
        btncadastrar.setToolTipText("");
        btncadastrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btncadastrarActionPerformed(evt);
            }
        });
        cadastros.add(btncadastrar, new org.netbeans.lib.awtextra.AbsoluteConstraints(470, 610, 230, 50));

        backgroundcadastro.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/cadastroview.png"))); // NOI18N
        cadastros.add(backgroundcadastro, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        background.add(cadastros, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, 700));

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1200, Short.MAX_VALUE)
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 700, Short.MAX_VALUE)
        );

        background.add(jPanel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1200, Short.MAX_VALUE)
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 700, Short.MAX_VALUE)
        );

        background.add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1200, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 700, Short.MAX_VALUE)
        );

        background.add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(background, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(background, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btncadastrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btncadastrarActionPerformed
       SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
     
        Funcionario funcionario = new Funcionario();
        funcionario.setNome(tfdnome.getText());
        funcionario.setSexo(tfdsexo.getText());
        funcionario.setCpf(tfdcpf.getText());
        funcionario.setTelefone(tfdtelefone.getText());
        funcionario.setEmail(tfdemail.getText());
        funcionario.setEndereco(tfdestado.getText());
        funcionario.setCidade(tfdcidade.getText());
        funcionario.setEstado(tfdestado.getText());
        funcionario.setData_nascimento(convertToLocalDate(tfddata.getDate()));
        funcionario.setData_cadastro(LocalDate.now());
        funcionario.setStatus(tfdstatus.getText());
        funcionario.setUsuario(tfdusuario.getText());
        funcionario.setSenha(tfdsenha.getText());
        funcionario.setAtividade(tfdatividade.getText());
        
        FuncionarioDao fd = new FuncionarioDao(sessionFactory);
        Optional<Funcionario> funcOpt = fd.salvar(funcionario);
        if (funcOpt.isPresent()) {
            System.out.println("Funcionário salvo com sucesso!");
        } else {
            System.out.println("Funcionário não foi salvo");
        }
    }//GEN-LAST:event_btncadastrarActionPerformed
    
    public LocalDate convertToLocalDate(Date dateToConvert) {
    return dateToConvert.toInstant()
      .atZone(ZoneId.systemDefault())
      .toLocalDate();
}
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ApplicationView.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ApplicationView.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ApplicationView.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ApplicationView.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ApplicationView().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel background;
    private javax.swing.JLabel backgroundcadastro;
    private javax.swing.JButton btncadastrar;
    private javax.swing.JPanel cadastros;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JTextField tfdatividade;
    private javax.swing.JTextField tfdcidade;
    private javax.swing.JTextField tfdcpf;
    private com.toedter.calendar.JDateChooser tfddata;
    private javax.swing.JTextField tfdemail;
    private javax.swing.JTextField tfdestado;
    private javax.swing.JTextField tfdnome;
    private javax.swing.JPasswordField tfdsenha;
    private javax.swing.JTextField tfdsexo;
    private javax.swing.JTextField tfdstatus;
    private javax.swing.JTextField tfdtelefone;
    private javax.swing.JTextField tfdusuario;
    // End of variables declaration//GEN-END:variables
}
